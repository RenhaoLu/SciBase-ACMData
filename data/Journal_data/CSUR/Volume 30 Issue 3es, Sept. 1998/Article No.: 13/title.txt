Foundations for partial evaluation of functional programs with computational effects