Modeling, Profiling, and Debugging the Energy Consumption of Mobile Devices