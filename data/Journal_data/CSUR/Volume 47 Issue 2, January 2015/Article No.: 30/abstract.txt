Megawatt-scale datacenters have emerged to meet the increasing demand for IT applications and services. The hunger for power brings large electricity bills to datacenter operators and causes significant impacts to the environment. To reduce costs and environmental impacts, modern datacenters, such as those of Google and Apple, are beginning to integrate renewable or green energy sources into their power supply. This article investigates the green-energy-aware power management problem for these datacenters and surveys and classifies works that explicitly consider renewable energy and/or carbon emission. Our aim is to give a full view of this problem. Hence, we first provide some basic knowledge on datacenters (including datacenter components, power infrastructure, power load estimation, and energy sources' operations), the electrical grid (including dynamic pricing, power outages, and emission factor), and the carbon market (including cap-and-trade and carbon tax). Then, we categorize existing research works according to their basic approaches used, including workload scheduling, virtual machine management, and energy capacity planning. Each category's discussion includes the description of the shared core idea, qualitative analysis, and quantitative analysis among works of this category.